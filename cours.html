<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LearnHub - Cours HTML & CSS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .sidebar {
            transition: transform 0.3s ease;
        }
        @media (max-width: 768px) {
            .sidebar.hidden-mobile {
                transform: translateX(-100%);
            }
        }
        .chapter-active {
            background: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
            color: white;
        }
        .chapter-completed {
            background: #10B981;
            color: white;
        }
        .progress-bar {
            transition: width 0.5s ease;
        }
        pre code {
            display: block;
            background: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
        }
    </style>
</head>
<body class="bg-gray-50">

    <!-- NAVBAR -->
    <nav class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-4">
                    <!-- Toggle Sidebar (Mobile) -->
                    <button id="toggleSidebar" class="md:hidden text-gray-700">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                    
                    <!-- Logo -->
                    <a href="index.html" class="flex items-center space-x-2">
                        <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-lg">L</span>
                        </div>
                        <span class="text-xl font-bold text-gray-900">LearnHub</span>
                    </a>
                </div>
                
                <div class="flex items-center space-x-4">
                    <a href="dashboard.html" class="text-gray-700 hover:text-blue-600 font-medium transition">
                        ‚Üê Mes cours
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- BARRE DE PROGRESSION GLOBALE -->
    <div class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700">Progression du cours</span>
                <span class="text-sm font-bold text-blue-600" id="progressPercentage">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progressBar" class="progress-bar bg-blue-600 h-2 rounded-full" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <!-- LAYOUT PRINCIPAL -->
    <div class="flex">
        
        <!-- SIDEBAR - Menu des Chapitres -->
        <aside id="sidebar" class="sidebar w-80 bg-white border-r min-h-screen sticky top-16 overflow-y-auto">
            <div class="p-6">
                <h2 class="text-xl font-bold text-gray-900 mb-4">üìö Chapitres</h2>
                
                <div class="space-y-2" id="chapterList">
                    <!-- Les chapitres seront ajout√©s ici par JavaScript -->
                </div>
            </div>
        </aside>

        <!-- CONTENU PRINCIPAL -->
        <main class="flex-1 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            
            <!-- En-t√™te du cours -->
            <div class="mb-8">
                <div class="flex items-center space-x-2 text-sm text-gray-500 mb-2">
                    <span>D√©veloppement Web</span>
                    <span>‚Üí</span>
                    <span>Frontend</span>
                </div>
                <h1 class="text-4xl font-bold text-gray-900 mb-4" id="courseTitle">HTML & CSS Fondamentaux</h1>
                <div class="flex items-center space-x-6 text-gray-600">
                    <span class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        12 heures
                    </span>
                    <span class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        <span id="chapterCount">8</span> chapitres
                    </span>
                    <span class="flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path>
                        </svg>
                        D√©butant
                    </span>
                </div>
            </div>

            <!-- Zone de contenu dynamique -->
            <div id="chapterContent" class="bg-white rounded-xl shadow-sm p-8">
                <!-- Le contenu du chapitre sera ins√©r√© ici -->
            </div>

            <!-- Navigation Chapitre Pr√©c√©dent/Suivant -->
            <div class="flex justify-between mt-8">
                <button id="prevChapter" class="px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition disabled:opacity-50 disabled:cursor-not-allowed">
                    ‚Üê Pr√©c√©dent
                </button>
                <button id="nextChapter" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition">
                    Suivant ‚Üí
                </button>
            </div>

        </main>
    </div>

    <!-- FIREBASE & SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBWCoy_YUEHpw_K0-XR59CsGUgAm9u64xQ",
            authDomain: "myclass-699b4.firebaseapp.com",
            projectId: "myclass-699b4",
            storageBucket: "myclass-699b4.firebasestorage.app",
            messagingSenderId: "65232464261",
            appId: "1:65232464261:web:457c35e894bef3f8883cec"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // DONN√âES DU COURS
        const courseData = {
            id: 'html-css-101',
            title: 'HTML & CSS Fondamentaux',
            chapters: [
                {
                    id: 1,
                    title: 'Introduction au Web',
                    duration: '15 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">Bienvenue dans le monde du d√©veloppement web !</h2>
                        <p class="mb-4">Le d√©veloppement web est l'art et la science de cr√©er des sites internet. Dans ce cours, vous allez apprendre les fondamentaux qui sont la base de TOUS les sites web.</p>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Que allez-vous apprendre ?</h3>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li>HTML : le squelette de votre site</li>
                            <li>CSS : le style et la beaut√©</li>
                            <li>Comment cr√©er votre premi√®re page web</li>
                            <li>Les bonnes pratiques du web moderne</li>
                        </ul>

                        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 my-6">
                            <p class="font-semibold text-blue-900">üí° Le saviez-vous ?</p>
                            <p class="text-blue-800">Le premier site web a √©t√© cr√©√© en 1991 par Tim Berners-Lee. Aujourd'hui, il y a plus de 1,9 milliard de sites web dans le monde !</p>
                        </div>

                        <p class="mb-4">Pr√™t √† commencer ? Cliquez sur "Suivant" pour d√©couvrir ce qu'est HTML !</p>
                    `
                },
                {
                    id: 2,
                    title: 'Qu\'est-ce que HTML ?',
                    duration: '20 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">HTML : Le langage du Web</h2>
                        <p class="mb-4">HTML signifie <strong>HyperText Markup Language</strong>. C'est le langage qui structure le contenu des pages web.</p>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Votre premi√®re page HTML</h3>
                        <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Ma premi√®re page&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Bonjour le monde !&lt;/h1&gt;
    &lt;p&gt;Ceci est ma premi√®re page web.&lt;/p&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <h3 class="text-xl font-bold mt-6 mb-3">Explication du code</h3>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li><code>&lt;!DOCTYPE html&gt;</code> : indique qu'il s'agit d'une page HTML5</li>
                            <li><code>&lt;html&gt;</code> : √©l√©ment racine</li>
                            <li><code>&lt;head&gt;</code> : contient les m√©tadonn√©es</li>
                            <li><code>&lt;body&gt;</code> : contient le contenu visible</li>
                        </ul>

                        <div class="bg-green-50 border-l-4 border-green-500 p-4 my-6">
                            <p class="font-semibold text-green-900">‚úÖ Exercice pratique</p>
                            <p class="text-green-800">Copiez ce code dans un fichier nomm√© <code>index.html</code> et ouvrez-le dans votre navigateur !</p>
                        </div>
                    `
                },
                {
                    id: 3,
                    title: 'Les balises HTML essentielles',
                    duration: '25 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">Les balises que vous devez conna√Ætre</h2>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Balises de titre</h3>
                        <pre><code>&lt;h1&gt;Titre principal&lt;/h1&gt;
&lt;h2&gt;Sous-titre&lt;/h2&gt;
&lt;h3&gt;Sous-sous-titre&lt;/h3&gt;</code></pre>

                        <h3 class="text-xl font-bold mt-6 mb-3">Balises de texte</h3>
                        <pre><code>&lt;p&gt;Un paragraphe de texte&lt;/p&gt;
&lt;strong&gt;Texte en gras&lt;/strong&gt;
&lt;em&gt;Texte en italique&lt;/em&gt;</code></pre>

                        <h3 class="text-xl font-bold mt-6 mb-3">Les listes</h3>
                        <pre><code>&lt;ul&gt;
  &lt;li&gt;√âl√©ment 1&lt;/li&gt;
  &lt;li&gt;√âl√©ment 2&lt;/li&gt;
&lt;/ul&gt;</code></pre>

                        <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 my-6">
                            <p class="font-semibold text-yellow-900">‚ö†Ô∏è Attention</p>
                            <p class="text-yellow-800">Toujours fermer vos balises ! Chaque <code>&lt;p&gt;</code> doit avoir son <code>&lt;/p&gt;</code></p>
                        </div>
                    `
                },
                {
                    id: 4,
                    title: 'Introduction au CSS',
                    duration: '30 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">CSS : Donnez du style √† vos pages !</h2>
                        <p class="mb-4">CSS signifie <strong>Cascading Style Sheets</strong>. C'est le langage qui rend votre site beau !</p>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Votre premier CSS</h3>
                        <pre><code>&lt;style&gt;
  h1 {
    color: blue;
    font-size: 32px;
  }
  
  p {
    color: gray;
    line-height: 1.6;
  }
&lt;/style&gt;</code></pre>

                        <h3 class="text-xl font-bold mt-6 mb-3">Anatomie d'une r√®gle CSS</h3>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li><strong>S√©lecteur</strong> : l'√©l√©ment HTML √† styler (ex: h1, p)</li>
                            <li><strong>Propri√©t√©</strong> : ce que vous voulez changer (ex: color, font-size)</li>
                            <li><strong>Valeur</strong> : la valeur de la propri√©t√© (ex: blue, 32px)</li>
                        </ul>

                        <p class="mb-4">Dans le prochain chapitre, nous verrons comment cr√©er une page web compl√®te avec HTML et CSS !</p>
                    `
                },
                {
                    id: 5,
                    title: 'Cr√©er votre premier site',
                    duration: '40 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">Projet pratique : Votre carte de visite web</h2>
                        <p class="mb-4">Il est temps de mettre en pratique tout ce que vous avez appris ! Nous allons cr√©er une carte de visite num√©rique.</p>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Le code complet</h3>
                        <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;Ma Carte de Visite&lt;/title&gt;
  &lt;style&gt;
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    
    .card {
      background: white;
      padding: 40px;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      text-align: center;
      max-width: 400px;
    }
    
    h1 {
      color: #667eea;
      margin: 0 0 10px 0;
    }
    
    p {
      color: #666;
      line-height: 1.6;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;div class="card"&gt;
    &lt;h1&gt;Jean Dupont&lt;/h1&gt;
    &lt;p&gt;D√©veloppeur Web Junior&lt;/p&gt;
    &lt;p&gt;üìß jean@email.com&lt;/p&gt;
    &lt;p&gt;üìç Paris, France&lt;/p&gt;
  &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                        <div class="bg-purple-50 border-l-4 border-purple-500 p-4 my-6">
                            <p class="font-semibold text-purple-900">üéØ D√©fi</p>
                            <p class="text-purple-800">Personnalisez cette carte avec vos propres informations et changez les couleurs !</p>
                        </div>
                    `
                },
                {
                    id: 6,
                    title: 'Le mod√®le de bo√Æte CSS',
                    duration: '25 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">Comprendre le Box Model</h2>
                        <p class="mb-4">Chaque √©l√©ment HTML est une "bo√Æte" compos√©e de 4 parties :</p>
                        
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li><strong>Content</strong> : le contenu r√©el</li>
                            <li><strong>Padding</strong> : l'espace int√©rieur autour du contenu</li>
                            <li><strong>Border</strong> : la bordure</li>
                            <li><strong>Margin</strong> : l'espace ext√©rieur</li>
                        </ul>

                        <pre><code>.ma-boite {
  width: 300px;
  padding: 20px;
  border: 2px solid black;
  margin: 10px;
}</code></pre>

                        <p class="mb-4">Comprendre le box model est essentiel pour cr√©er des layouts professionnels !</p>
                    `
                },
                {
                    id: 7,
                    title: 'Flexbox : layouts modernes',
                    duration: '35 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">Flexbox : L'outil de mise en page moderne</h2>
                        <p class="mb-4">Flexbox permet de cr√©er des layouts flexibles et responsives facilement.</p>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Exemple de base</h3>
                        <pre><code>.container {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.item {
  flex: 1;
  padding: 20px;
}</code></pre>

                        <h3 class="text-xl font-bold mt-6 mb-3">Propri√©t√©s principales</h3>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li><code>justify-content</code> : alignement horizontal</li>
                            <li><code>align-items</code> : alignement vertical</li>
                            <li><code>flex-direction</code> : direction des √©l√©ments</li>
                        </ul>
                    `
                },
                {
                    id: 8,
                    title: 'Projet final & Certification',
                    duration: '60 min',
                    content: `
                        <h2 class="text-2xl font-bold mb-4">üéâ F√©licitations ! Vous avez termin√© le cours !</h2>
                        <p class="mb-4">Vous ma√Ætrisez maintenant les fondamentaux d'HTML et CSS. Il est temps de cr√©er votre projet final !</p>
                        
                        <h3 class="text-xl font-bold mt-6 mb-3">Projet Final : Cr√©ez votre portfolio</h3>
                        <p class="mb-4">Cr√©ez un site portfolio avec :</p>
                        <ul class="list-disc list-inside space-y-2 mb-4">
                            <li>Une page d'accueil avec votre pr√©sentation</li>
                            <li>Une section projets</li>
                            <li>Une section comp√©tences</li>
                            <li>Un formulaire de contact</li>
                        </ul>

                        <div class="bg-gradient-to-r from-blue-500 to-purple-600 text-white p-6 rounded-xl my-6">
                            <h4 class="text-xl font-bold mb-2">üèÜ Obtenez votre certificat !</h4>
                            <p class="mb-4">Une fois tous les chapitres compl√©t√©s, vous pourrez t√©l√©charger votre certificat de fin de cours.</p>
                            <button class="bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
                                T√©l√©charger mon certificat
                            </button>
                        </div>

                        <p class="text-center mt-8 text-gray-600">Merci d'avoir suivi ce cours ! Continuez √† pratiquer et √† cr√©er ! üöÄ</p>
                    `
                }
            ]
        };

        let currentChapter = 0;
        let currentUser = null;
        let completedChapters = [];

        // V√©rifier l'authentification
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                currentUser = user;
                await loadProgress();
                renderChapterList();
                loadChapter(currentChapter);
            } else {
                window.location.href = 'login.html';
            }
        });

        // Charger la progression depuis Firestore
        async function loadProgress() {
            try {
                const progressDoc = await getDoc(doc(db, "progress", `${currentUser.uid}_${courseData.id}`));
                if (progressDoc.exists()) {
                    const data = progressDoc.data();
                    completedChapters = data.completedChapters || [];
                    currentChapter = data.currentChapter || 0;
                }
            } catch (error) {
                console.error('Erreur chargement progression:', error);
            }
        }

        // Sauvegarder la progression
        async function saveProgress() {
            if (!currentUser) return;
            
            try {
                await setDoc(doc(db, "progress", `${currentUser.uid}_${courseData.id}`), {
                    userId: currentUser.uid,
                    courseId: courseData.id,
                    currentChapter: currentChapter,
                    completedChapters: completedChapters,
                    lastUpdate: new Date().toISOString()
                });
            } catch (error) {
                console.error('Erreur sauvegarde:', error);
            }
        }

        // Afficher la liste des chapitres
        function renderChapterList() {
            const chapterList = document.getElementById('chapterList');
            chapterList.innerHTML = '';
            
            courseData.chapters.forEach((chapter, index) => {
                const isCompleted = completedChapters.includes(chapter.id);
                const isActive = index === currentChapter;
                
                const chapterEl = document.createElement('div');
                chapterEl.className = `flex items-center justify-between p-3 rounded-lg cursor-pointer transition ${
                    isActive ? 'chapter-active' :
                    isCompleted ? 'chapter-completed' :
                    'hover:bg-gray-100'
                }`;
                
                chapterEl.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="flex-shrink-0">
                            ${isCompleted ? '‚úÖ' : isActive ? '‚ñ∂Ô∏è' : '‚≠ï'}
                        </div>
                        <div>
                            <div class="font-semibold text-sm">${chapter.title}</div>
                            <div class="text-xs opacity-75">${chapter.duration}</div>
                        </div>
                    </div>
                `;
                
                chapterEl.addEventListener('click', () => {
                    currentChapter = index;
                    loadChapter(currentChapter);
                    renderChapterList();
                    saveProgress();
                });
                
                chapterList.appendChild(chapterEl);
            });
            
            updateProgress();
        }

        // Charger un chapitre
        function loadChapter(index) {
            const chapter = courseData.chapters[index];
            document.getElementById('chapterContent').innerHTML = chapter.content;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            // Update navigation buttons
            document.getElementById('prevChapter').disabled = index === 0;
            document.getElementById('nextChapter').textContent = 
                index === courseData.chapters.length - 1 ? 'Terminer le cours ‚úì' : 'Suivant ‚Üí';
            
            // Marquer comme compl√©t√© apr√®s 3 secondes
            setTimeout(() => {
                if (!completedChapters.includes(chapter.id)) {
                    completedChapters.push(chapter.id);
                    renderChapterList();
                    saveProgress();
                }
            }, 3000);
        }

        // Mettre √† jour la barre de progression
        function updateProgress() {
            const progress = (completedChapters.length / courseData.chapters.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressPercentage').textContent = Math.round(progress) + '%';
        }

        // Navigation
        document.getElementById('prevChapter').addEventListener('click', () => {
            if (currentChapter > 0) {
                currentChapter--;
                loadChapter(currentChapter);
                renderChapterList();
                saveProgress();
            }
        });

        document.getElementById('nextChapter').addEventListener('click', () => {
            if (currentChapter < courseData.chapters.length - 1) {
                currentChapter++;
                loadChapter(currentChapter);
                renderChapterList();
                saveProgress();
            } else {
                alert('üéâ F√©licitations ! Vous avez termin√© le cours !');
            }
        });

        // Toggle sidebar mobile
        document.getElementById('toggleSidebar').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('hidden-mobile');
        });
    </script>

</body>
</html>